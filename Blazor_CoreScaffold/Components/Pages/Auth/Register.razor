@using System.ComponentModel.DataAnnotations
@using Blazor_CoreScaffold.Components.Layout
@page "/register"
@layout LoginLayout
@rendermode InteractiveServer
<PageTitle>Admin Registration</PageTitle>

<div class="register-shell">
    <div class="register-card">
        <div class="register-card__header">
            <div class="register-card__logo">
                <MudIcon Icon="@Icons.Material.Filled.Info" Size="Size.Medium" />
            </div>
            <MudText Typo="Typo.h5" Align="Align.Center" Class="register-card__title">
                Create an Administrator Account
            </MudText>
            <MudText Typo="Typo.body2" Align="Align.Center" Class="register-card__subtitle">
                Enter your details below to register.
            </MudText>
        </div>

        <MudForm @ref="form"
                 @bind-IsValid="@success"
                 Model="@model"
                 ValidationDelay="0"
                 OnValidSubmit="SubmitRegistration"
                 Class="register-form">
            <MudTextField T="string"
                          Label="Full Name"
                          @bind-Value="model.FullName"
                          For="@(() => model.FullName)"
                          Required="true"
                          RequiredError="Full name is required!"
                          Variant="Variant.Outlined"
                          Margin="Margin.None"
                          Class="register-input" />

            <MudTextField T="string"
                          Label="Email Address"
                          @bind-Value="model.Email"
                          For="@(() => model.Email)"
                          Required="true"
                          RequiredError="Email is required!"
                          Validation="@(new EmailAddressAttribute() { ErrorMessage = "The email address is invalid" })"
                          Variant="Variant.Outlined"
                          Margin="Margin.None"
                          Class="register-input" />

            <MudTextField T="string"
                          Label="Username"
                          @bind-Value="model.UserName"
                          For="@(() => model.UserName)"
                          Required="true"
                          RequiredError="Username is required!"
                          Variant="Variant.Outlined"
                          Margin="Margin.None"
                          Class="register-input" />

            <div class="register-password">
                <MudTextField T="string"
                              Label="Password"
                              @bind-Value="model.Password"
                              For="@(() => model.Password)"
                              Required="true"
                              RequiredError="Password is required!"
                              Variant="Variant.Outlined"
                              Margin="Margin.None"
                              InputType="@PasswordInput"
                              Adornment="Adornment.End"
                              AdornmentIcon="@PasswordVisibilityIcon"
                              OnAdornmentClick="@TogglePasswordVisibility"
                              Class="register-input" />
            </div>

            <div class="register-password-strength">
                <MudProgressLinear Color="@GetPasswordStrengthColor()"
                                   Value="@GetPasswordStrengthValue()"
                                   Class="register-password-strength__bar" />
                <MudText Typo="Typo.caption" Class="register-password-strength__label">
                    @GetPasswordStrengthLabel()
                </MudText>
            </div>

            <MudTextField T="string"
                          Label="Confirm Password"
                          @bind-Value="model.ConfirmPassword"
                          For="@(() => model.ConfirmPassword)"
                          Required="true"
                          RequiredError="Please confirm password!"
                          Variant="Variant.Outlined"
                          Margin="Margin.None"
                          InputType="@ConfirmPasswordInput"
                          Validation="@(PasswordMatch)"
                          Adornment="Adornment.End"
                          AdornmentIcon="@ConfirmPasswordVisibilityIcon"
                          OnAdornmentClick="@ToggleConfirmPasswordVisibility"
                          Class="register-input" />

            <MudButton ButtonType="ButtonType.Submit"
                       Variant="Variant.Filled"
                       Color="Color.Primary"
                       Size="Size.Large"
                       FullWidth="true"
                       Disabled="@(!success)"
                       Class="register-submit">
                Register
            </MudButton>
        </MudForm>

        <MudText Typo="Typo.body2" Align="Align.Center" Class="register-link">
            Already have an account?
            <MudLink Href="/login" Class="register-link__anchor">Sign In</MudLink>
        </MudText>
    </div>

    <MudText Typo="Typo.caption" Align="Align.Center" Class="register-footer">
        Â© @DateTime.Now.Year ProjectName. All rights reserved.
    </MudText>
</div>
