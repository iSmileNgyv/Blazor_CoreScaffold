@inherits LayoutComponentBase
@using MudBlazor

<MudThemeProvider @ref="_mudThemeProvider"
                  Theme="_dashboardTheme"
                  @bind-IsDarkMode="_isDarkMode" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<MudLayout Class="app-layout">
    <MudDrawer @bind-Open="_drawerOpen"
               Variant="DrawerVariant.Responsive"
               Elevation="0"
               ClipMode="DrawerClipMode.Always"
               Breakpoint="Breakpoint.Md"
               Class="app-layout__drawer">
        <NavMenu />
    </MudDrawer>

    <MudMainContent Class="app-layout__main">
        <header class="app-header">
            <MudIconButton Icon="@Icons.Material.Outlined.Menu"
                           Color="Color.Inherit"
                           Variant="Variant.Text"
                           Size="Size.Medium"
                           OnClick="ToggleDrawer"
                           Class="app-header__menu"
                           AriaLabel="Toggle navigation" />

            <div class="app-header__actions">
                <MudBadge Content="3"
                          Color="Color.Primary"
                          Overlap="true"
                          Class="app-header__badge">
                    <MudIconButton Icon="@Icons.Material.Outlined.Mail"
                                   Color="Color.Inherit"
                                   Variant="Variant.Text"
                                   Size="Size.Medium"
                                   Class="app-header__icon"
                                   AriaLabel="Open messages" />
                </MudBadge>

                <MudBadge Content="2"
                          Color="Color.Error"
                          Overlap="true"
                          Class="app-header__badge">
                    <MudIconButton Icon="@Icons.Material.Outlined.Notifications"
                                   Color="Color.Inherit"
                                   Variant="Variant.Text"
                                   Size="Size.Medium"
                                   Class="app-header__icon"
                                   AriaLabel="Open notifications" />
                </MudBadge>

                <MudAvatar Size="Size.Medium"
                           Class="app-header__avatar"
                           ImageUrl="https://lh3.googleusercontent.com/aida-public/AB6AXuAb3rKm-68LV6d9jH2crGhZ-SHMxVKP0wBizNFaEzoa0gSYPRrpVnDjEwio2QSeQJ8fA03aUz6KimvbXdklZkPHHvjfo8VaScIPXrL0S2p1S7p1qmeIHOfuc0hkM6dbepjRTxhCorP71AiskdTzaCt88jtMeY4GK8dvxYRgwheJGSk8tKknOANrZjZdKNQKCjsLT6xVne-1T5JmC1eBpKE-aTPh4m4RDF-XovNrTC8CGwfekbUcOXeRSXf4zIcpD-VClZu-YEUDx8P1"
                           Alt="Core Project Admin" />
            </div>
        </header>

        <main class="app-main">
            @Body
        </main>

        <footer class="app-footer">
            <MudText Typo="Typo.caption" Class="app-footer__text">Â© 2024 Core Project. All rights reserved.</MudText>
            <div class="app-footer__links">
                <MudLink Href="#" Class="app-footer__link">Terms of Service</MudLink>
                <MudLink Href="#" Class="app-footer__link">Privacy Policy</MudLink>
            </div>
        </footer>
    </MudMainContent>
</MudLayout>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

@code {
    private MudThemeProvider? _mudThemeProvider;
    private bool _isDarkMode = true;
    private bool _drawerOpen = true;

    private readonly MudTheme _dashboardTheme = new()
    {
        PaletteLight = new PaletteLight
        {
            Primary = "#137fec",
            Background = "#f6f7f8",
            Surface = "#ffffff",
            DrawerBackground = "#ffffff",
            DrawerText = "#1f2937",
            AppbarBackground = "#ffffff",
            TextPrimary = "#1f2937",
            TextSecondary = "#6b7280",
            Success = "#10B981",
            Warning = "#FBBF24",
            Error = "#EF4444"
        },
        PaletteDark = new PaletteDark
        {
            Primary = "#137fec",
            Background = "#101922",
            Surface = "#1A242E",
            DrawerBackground = "#121c26",
            DrawerText = "#f9fafb",
            AppbarBackground = "#1A242E",
            TextPrimary = "#f9fafb",
            TextSecondary = "#9ca3af",
            Success = "#10B981",
            Warning = "#FBBF24",
            Error = "#EF4444"
        },
        LayoutProperties = new LayoutProperties
        {
            DefaultBorderRadius = "12px"
        }
    };

    private void ToggleDrawer() => _drawerOpen = !_drawerOpen;
}
